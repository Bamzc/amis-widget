/*!
 * amis-widget v1.0.3
 * author: fex
 * build tool: AKFun
 * build time: Tue Dec 28 2021 10:56:21 GMT+0800 (China Standard Time)
 * build tool info: https://github.com/wibetter/akfun
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.amisWidget=t():e.amisWidget=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=10)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@babel/runtime/helpers/inheritsLoose")},function(e,t){e.exports=require("amis-editor")},function(e,t){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,t){e.exports=require("amis")},function(e,t){e.exports=require("@babel/runtime/helpers/extends")},function(e,t){e.exports=require("@babel/runtime/helpers/objectWithoutPropertiesLoose")},function(e,t){e.exports=require("vue/dist/vue.min")},function(e,t){e.exports=require("amis/lib/utils/helper")},function(e,t){e.exports=require("jquery")},function(e,t,r){"use strict";r.r(t),r.d(t,"registerRendererByType",(function(){return q})),r.d(t,"registerAmisEditorPlugin",(function(){return S})),r.d(t,"getSchemaTpl",(function(){return P.getSchemaTpl}));var n,o,i=r(4),s=r(3),u=r.n(s),a=r(1),c=r.n(a),p=r(0),f=r.n(p),m=(r(9),function(e){if(e&&("function"==typeof e||"object"==typeof e))return function(t){function r(r){var n;return(n=t.call(this,r)||this).dom=void 0,n.instance=void 0,n.domRef=n.domRef.bind(u()(n)),n.instance="function"==typeof e?new e:e,n}c()(r,t);var n=r.prototype;return n.componentDidMount=function(){var e=this.instance.onMount;e&&e.apply(this.instance,[this.props])},n.componentDidUpdate=function(e){var t=this.instance.onUpdate;t&&t.apply(this.instance,[this.props,e])},n.componentWillUnmount=function(){var e=this.instance.onUnmout;e&&e.apply(this.instance,this.props)},n.domRef=function(e){this.instance.$root=this.dom=e,this._render()},n._render=function(){if(this.dom){var e=this.instance.template;"string"==typeof e?this.dom.innerHTML=e:"function"==typeof e&&(this.dom.innerHTML=e(this.props))}},n.render=function(){return f.a.createElement("div",{ref:this.domRef})},r}(f.a.Component)}),d=r(5),l=r.n(d),y=r(6),v=r.n(y),h=r(7),g=r.n(h),b=r(8),j=["data"],w=function(e){if(e&&("function"==typeof e||"object"==typeof e))return function(t){function r(e){var r;return(r=t.call(this,e)||this).domRef=void 0,r.vm=void 0,r.domRef=f.a.createRef(),r.resolveAmisProps=r.resolveAmisProps.bind(u()(r)),r}c()(r,t);var n=r.prototype;return n.componentDidMount=function(){var t=this,r=this.resolveAmisProps(),n=r.amisData,o=r.amisFunc,i=e="function"==typeof e?new e:e,s=i.data,u=v()(i,j);this.vm=new g.a(l()({data:Object(b.extendObject)(n,"function"==typeof s?s():s)},u)),Object.keys(o).forEach((function(e){var r=o[e];t.vm.$on(e,(function(e){return r&&r.apply(void 0,Array.isArray(e)?e:[e])}))})),this.domRef.current.appendChild(this.vm.$mount().$el)},n.componentWillUnmount=function(){this.vm.$destroy()},n.resolveAmisProps=function(){var e=this,t={},r={};return Object.keys(this.props).forEach((function(n){var o=e.props[n];"function"==typeof o?t[n]=o:r[n]=o})),{amisData:r,amisFunc:t}},n.componentDidUpdate=function(){var e=this;Object.keys(this.props).forEach((function(t){return"function"!=typeof e.props[t]&&(e.vm[t]=e.props[t])}))},n.render=function(){return f.a.createElement("div",{ref:this.domRef})},r}(f.a.Component)},x="[amis-widget]";function O(e){var t=!1;if(!e)return!1;var r=new e;return r.rendererName?r.name?r.description?!r.tags||Array.isArray(r.tags)&&0===r.tags.length?console.error(x+"自定义插件注册失败，自定义组件分类（tags）不能为空。"):r.panelTitle?(r.icon||Object.assign(e.prototype,{icon:"fa fa-file-code-o"}),function(e){if(!e)return;e.rendererName&&e.rendererName.indexOf("npm-custom")<0&&(e.rendererName="npm-custom-"+e.rendererName);e.previewSchema&&e.previewSchema.type&&e.previewSchema.type.indexOf("npm-custom")<0&&(e.previewSchema.type="npm-custom-"+e.previewSchema.type);e.scaffold&&Array.isArray(e.scaffold)?e.scaffold.map((function(e){return e.type.indexOf("npm-custom")<0&&(e.type="npm-custom-"+e.type),e})):e.scaffold&&e.scaffold.type&&e.scaffold.type.indexOf("npm-custom")<0&&(e.scaffold.type="npm-custom-"+e.scaffold.type)}(e.prototype),t=!0):console.error(x+"自定义插件注册失败，自定义组件配置面板Title（panelTitle）不能为空。"):console.error(x+"自定义插件注册失败，自定义组件描述（description）不能为空。"):console.error(x+"自定义插件注册失败，自定义组件名称（name）不能为空。"):console.error(x+"自定义插件注册失败，关联渲染器（rendererName）不能为空。"),t}function q(e,t){if(e){var r,s,u,a={type:"",usage:o.renderer,weight:0,framework:n.react};if(t&&(r=t,"String"===Object.prototype.toString.call(r).slice(8,-1))?Object.assign(a,{type:t}):Object.assign(a,t),a&&!a.type)console.error(x+"自定义组件注册失败，自定义组件类型（type）不能为空。");else{a.type=(s=a.type,u=s,s?(s&&s.indexOf("npm-custom")<0&&(u="npm-custom-"+s),u):u),a.framework=function(e){if(!e)return"react";var t=e.toLowerCase().trim();switch(t){case"jquery":case"jq":t=n.jquery;break;case"vue":case"vue2":case"vue 2":case"vue2.0":case"vue 2.0":t=n.vue2;break;case"vue3":case"vue 3":case"vue3.0":case"vue 3.0":t=n.vue3;break;default:t=n.react}return t}(a.framework);var c={renderer:i.Renderer,formitem:i.FormItem,options:i.OptionsControl},p={react:function(e){return e},vue2:w,vue3:w,jquery:m}[a.framework](e);c[a.usage||"renderer"]?(c[a.usage||"renderer"]({type:a.type,weight:a.weight})(p),console.info("注册了一个自定义amis组件:",{type:a.type,weight:a.weight,component:p,framework:a.framework,usage:a.usage})):console.error(x+"自定义组件注册失败，不存在"+a.usage+"自定义组件类型。")}}}!function(e){e.react="react",e.vue2="vue2",e.vue3="vue3",e.jquery="jquery"}(n||(n={})),function(e){e.renderer="renderer",e.formitem="formitem",e.options="options"}(o||(o={}));var P=r(2);function S(e,t){var r=function(e){function t(t){return e.call(this,t)||this}return c()(t,e),t}(P.BasePlugin);if(Object.assign(r.prototype,new e),Object.assign(r.prototype,t),O(r)){Object(P.registerEditorPlugin)(r);var n=r.prototype;window&&window.postMessage&&window.postMessage({type:"amis-widget-register-event",eventMsg:x+"注册一个自定义amis-editor插件",editorPluginName:n.name},"*"),console.info(x+"注册了一个自定义amis-editor插件:",n)}return r}}])}));